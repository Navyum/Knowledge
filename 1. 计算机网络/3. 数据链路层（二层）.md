# 又叫MAC层（Medium Access Control，即媒体访问控制）

1. **MAC 地址是一个局域网内才有效的地址**
2. **MAC 地址只要过网关，就必定会改变**
3. **MAC 地址记录的是下一跳的地址**
# 主要解决问题：

1. 解决包的接收对象
2. 解决包的有序、并发问题(多路访问)，制定发送规则
3. 解决发送失败等故障
# MAC层协议：

![图片](./IMG/3.%20数据链路层（二层）.md/3141acce.png)


# IP数据报（类型 0800）:

# ARP 协议（类型 0806）：

解决问题：在同一个局域网内，已知 IP 地址，求 MAC 地址的协议。

具体操作：在局域网内发送如下广播包，谁的IP是这个，谁进行回答。

优化：本地机器会缓存ARP结果

协议内容：

![图片](./IMG/3.%20数据链路层（二层）.md/0f663a04.png)



# RARP 协议（）:

解决问题：已知Mac地址，求IP地址



# 数据链路层设备：交换机

数据包经过交换机，交换机记录对应IP-> Mac地址的映射，形成转发表（有过期时间）；


# 多个局域网的环路问题：

STP 协议：有环的我们常称为图。将图中的环破了，就生成了树。在计算机网络中，生成树的算法叫作 STP。具体做法就是"华山论剑，带领小弟拜山头"

# 如何解决广播问题和安全问题：

1.  物理隔离（建多个局域网，之间隔离）
2. VLAN（虚拟局域网）
![图片](./IMG/3.%20数据链路层（二层）.md/5ed4ad66.png)


在二层头中添加Tag, 里面使用 VLAN ID，对不同的虚拟局域网做区分。交换机把二层的头取下来的时候，识别出 VLAN ID。这样只有相同 VLAN 的包，才会互相转发。

